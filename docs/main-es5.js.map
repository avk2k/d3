{"version":3,"sources":["webpack:///src/app/monitoring-graph/monitoring-graph.component.ts","webpack:///src/app/monitoring-graph/monitoring-graph.component.html","webpack:///src/assets/shema.css","webpack:///src/app/app.component.css","webpack:///src/environments/environment.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/monitoring-graph/monitoring-graph.component.css","webpack:///src/app/app-routing.module.ts","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object"],"names":["MonitoringGraphComponent","graphColor","showLimits","colorizeByLimits","limits","_limits","sort","a","b","value","data","_graphData","updateGraph","changes","setGraphColor","transition","style","currentValue","attr","d","length","margin","top","right","bottom","left","graphWidth","graphHeight","remove","svg","append","timeFormat_Russian","dateTime","date","time","periods","days","shortDays","months","shortMonths","color","limit","find","v","xScale","domain","range","origXScale","copy","xAxis","scale","tickPadding","tickFormat","i","getHours","format","xLabels","axis","selectAll","svgXAxis","call","max","y","yAxis","ticks","text","yUnits","drawLimits","res","sorted","push","name","offset","join","points","datum","x","callout","g","path","split","_","node","getBBox","w","width","h","height","bisect","mx","bis","invert","index","valueOf","hover","baloonMargin","hoverVLine","hoverHLine","hoverCircle","baloon","trimEnd","rect","stroke","tooltip","hoverGroup","zoom","scaleExtent","extent","on","event","transform","rescaleX","graphArea","coords","yScale","lineGroups","enter","selector","template","environment","production","AppComponent","el","id","state","colorizeGraph","target","checked","row","columns","Number","parseFloat","then","graphData","_this","selection","duration","delay","blink","AppModule","declarations","imports","providers","bootstrap","routes","AppRoutingModule","forRoot","exports","bootstrapModule","err","console","error","webpackEmptyAsyncContext","req","Promise","resolve","e","Error","code","keys","module"],"mappings":"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","file":"main-es5.js","sourcesContent":["import { Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport * as d3 from 'd3';\nimport { style } from 'd3';\nimport { ppid } from 'process';\n\n/** Описание линии, которая будет отображаться на графике, \n * как некий порог значений, чтобы визуально понимать переход границы */\nexport interface GraphLimit {\n  /** Название порога */\n  name: string,\n  /** Хначение порога */\n  value: number,\n  /** Цвет, которым будет отображаться линия и график */\n  color: string\n}\n\n/** Данные для рисования */\nexport interface GraphData {\n  /** Время значения */\n  date: Date,\n  /** Значение */\n  value: number\n}\n\n@Component({\n  selector: 'app-monitoring-graph',\n  templateUrl: './monitoring-graph.component.html',\n  styleUrls: ['./monitoring-graph.component.css']\n})\nexport class MonitoringGraphComponent implements OnInit, OnChanges {\n  /** Пороги значений для отображения на графике */\n  @Input()\n  public set limits(limits: GraphLimit[]) {\n    if (!limits) return;\n    // Сортируем лимиты, для удобного дальнейшего использования\n    this._limits = limits.sort((a, b) => a.value > b.value ? -1 : 1);\n  }\n  private _limits: GraphLimit[];\n\n  /** Цвет графика при однотонном рисовании (по умолчанию 'steelblue') */\n  @Input()\n  public graphColor: string | number = 'steelblue';\n\n  /** Значения для рисования графика (внутреннее поле) */\n  private _graphData: GraphData[];\n  /** Значения для рисования графика */\n  @Input()\n  public set graphData(data: GraphData[]) {\n    if (!data) return;\n    this._graphData = data;\n    this.updateGraph();\n  }\n\n  /** Единицы измерения по оси Y */\n  @Input()\n  public yUnits: string;\n\n  /** Показывать или нет пороги значений на графике. По умолчанию true */\n  @Input()\n  public showLimits: boolean = true;\n\n  /** Расцвечивать график по цветам лимитов. По умолчанию true */\n  @Input()\n  public colorizeByLimits: boolean = true;\n\n  /** Ширина графика (без отступов) */\n  private graphWidth: number;\n  /** Высота графика (без отступов) */\n  private graphHeight: number;\n\n\n  constructor() { }\n\n  ngOnInit(): void { }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.colorizeByLimits) {\n      this.setGraphColor();\n    }\n    if (changes.showLimits) {\n      d3.select(\"#limits\").transition().style(\"opacity\", changes.showLimits.currentValue ? 1 : 0);\n    }\n\n  }\n\n  private setGraphColor() {\n    d3.select(\"#graphLine\")\n    .attr('stroke', (d) => this.colorizeByLimits && this._limits?.length > 0 ? 'url(#limitsGradient)' : this.graphColor)\n  }\n\n  /** Обновление графика */\n  private updateGraph() {\n    // Если нет данных, то выходим\n    if (!this._graphData) return;\n    // Определяем размеры графика\n    const margin = { top: 10, right: 30, bottom: 100, left: 30 };\n    this.graphWidth = 600 - margin.left - margin.right;\n    this.graphHeight =\n      600 -\n      margin.top -\n      margin.bottom;\n\n    // Удаляем старый график\n    d3\n      .selectAll('#monitoringGraph>*')\n      .remove();\n\n    // Добавляем основной объект SVG\n    const svg = d3\n      .select('#monitoringGraph')\n      .append('svg')\n      .attr('width', this.graphWidth + margin.left + margin.right)\n      .attr('height', this.graphHeight + margin.top + margin.bottom)\n      .append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n    // Определяем параметры обрезки данных при отрисовке\n    // Иначе график уходит за прелы области данных\n    svg\n      .append('defs')\n      .append('clipPath')\n      .attr('id', 'clip')\n      .append('rect')\n      .attr('width', this.graphWidth)\n      .attr('height', this.graphHeight)\n      .attr('x', 0)\n      .attr('y', 0);\n\n    /** Формат времени для России. Нужен для преобразования временных значений */\n    const timeFormat_Russian = d3.timeFormatLocale({\n      dateTime: '%A, %e %B %Y г. %X',\n      date: '%d.%m.%Y',\n      time: '%H:%M:%S',\n      periods: ['AM', 'PM'],\n      days: [\n        'воскресенье',\n        'понедельник',\n        'вторник',\n        'среда',\n        'четверг',\n        'пятница',\n        'суббота'\n      ],\n      shortDays: ['вс', 'пн', 'вт', 'ср', 'чт', 'пт', 'сб'],\n      months: [\n        'января',\n        'февраля',\n        'марта',\n        'апреля',\n        'мая',\n        'июня',\n        'июля',\n        'августа',\n        'сентября',\n        'октября',\n        'ноября',\n        'декабря'\n      ],\n      shortMonths: [\n        'янв',\n        'фев',\n        'мар',\n        'апр',\n        'май',\n        'июн',\n        'июл',\n        'авг',\n        'сен',\n        'окт',\n        'ноя',\n        'дек'\n      ]\n    });\n\n    /** Функция определения цвета по данным на основе лимитов */\n    const color = (d: GraphData) => {\n      if (!d || !this._limits) {\n        return 'black';\n      }\n      let limit = this._limits.find(v => d.value > v.value);\n      if (!limit) {\n        return this._limits?.length > 0 ? 'green' : this.graphColor;\n      }\n      return limit.color;\n    }\n\n    let xScale = d3\n      .scaleTime()\n      .domain(d3.extent(this._graphData, d => d.date))\n      .range([0, this.graphWidth]);\n    const origXScale = xScale.copy();\n\n    /** Формирование оси X\n     * @param scale Функция скалировния dhtvtyb\n     */\n    const xAxis = (scale: d3.ScaleTime<number, number>) =>\n      d3\n        .axisBottom(scale)\n        .tickPadding(0)\n        .tickFormat((d: Date, i) => {\n          if (d.getHours() === 0) {\n            return timeFormat_Russian.format('%d %B %Y')(d);\n          } else {\n            return timeFormat_Russian.format('%H:%M')(d);\n          }\n        });\n\n    /**\n     * Формирование меток на оси X\n     * @param axis ось X\n     */\n    const xLabels = (\n      axis: d3.Selection<SVGElement, unknown, HTMLElement, unknown>\n    ) => {\n      axis\n        .selectAll('text')\n        .style('text-anchor', 'end')\n        .attr('dx', '-.8em')\n        .attr('dy', '.15em')\n        .attr('transform', 'rotate(-45)');\n    };\n\n    const svgXAxis = svg\n      .append('g')\n      .attr('transform', 'translate(0,' + this.graphHeight + ')')\n      .call(xAxis(xScale))\n      .call(xLabels);\n\n    /** Максимальное значение по значениям */\n    const max = d3.max(this._graphData, (d) => d.value);\n\n    // Рисуем ось Y\n    const y = d3\n      .scaleLinear()\n      .domain([0, max])\n      .range([this.graphHeight, 0]);\n    const yAxis = d3\n      .axisLeft(y)\n      .ticks(5);\n    svg.append('g').call(yAxis)\n      .append(\"text\")\n      .attr(\"x\", 10)\n      .attr(\"y\", 10)\n      .attr(\"fill\", \"currentColor\")\n      .attr(\"text-anchor\", \"start\")\n      .text(this.yUnits);\n\n    //#region Рисуем линии лимитов\n    this.drawLimits(svg, y);\n    //#endregion\n\n    if (this._limits) {\n      svg.append(\"linearGradient\")\n        .attr(\"id\", \"limitsGradient\")\n        .attr(\"gradientUnits\", \"userSpaceOnUse\")\n        .attr(\"x1\", 0)\n        .attr(\"y1\", 0)\n        .attr(\"x2\", 0)\n        .attr(\"y2\", this.graphHeight)\n        .selectAll(\"stop\")\n        .data(() => {\n          let res = [];\n          const sorted = [...this._limits];\n          sorted.push({ value: 0, color: 'green', name: '' });\n          for (var i = 0; i < sorted.length - 1; i++) {\n            res.push({ offset: y(sorted[i].value) / this.graphHeight, color: sorted[i].color })\n            res.push({ offset: y(sorted[i].value) / this.graphHeight, color: sorted[i + 1].color })\n          }\n          return res;\n        })\n        .join(\"stop\")\n        .attr(\"offset\", d => d.offset)\n        .attr(\"stop-color\", d => d.color);\n    }\n\n\n    const points = svg\n      .append('path')\n      .datum(this._graphData)\n      .attr(\"id\", \"graphLine\")\n      .attr('clip-path', 'url(#clip)')\n      .attr('fill', 'none')\n      .attr('stroke-width', 1.5)\n      .attr(\n        'd',\n        d3\n          .line<{ date: Date; value: number }>()\n          .x(d => xScale(d.date))\n          .y(d => y(d.value))\n      );\n    this.setGraphColor();\n      \n\n    const callout = (g, value) => {\n      if (!value) return g.style(\"display\", \"none\");\n\n      g\n        .style(\"display\", null)\n        .style(\"pointer-events\", \"none\")\n        .style(\"font\", \"10px sans-serif\");\n\n      const path = g.selectAll(\"path\")\n        .data([null])\n        .join(\"path\")\n        .attr(\"fill\", \"white\")\n        .attr(\"stroke\", \"black\");\n\n      const text = g.selectAll(\"text\")\n        .data([null])\n        .join(\"text\")\n        .call(text => text\n          .selectAll(\"tspan\")\n          .data((value + \"\").split(/\\n/))\n          .join(\"tspan\")\n          .attr(\"x\", 0)\n          .attr(\"y\", (d, i) => `${i * 1.1}em`)\n          .style(\"font-weight\", (_, i) => i ? null : \"bold\")\n          .text(d => d));\n\n      const { x, y, width: w, height: h } = text.node().getBBox();\n\n      text.attr(\"transform\", `translate(${-w / 2},${15 - y})`);\n      path.attr(\"d\", `M${-w / 2 - 10},5H-5l5,-5l5,5H${w / 2 + 10}v${h + 20}h-${w + 20}z`);\n    }\n\n    /** Находим ближайшую точку графика к вертикальной линии\n     * @param mx координата X\n     * @returns Ближайший элемент данных\n     */\n    const bisect = (mx: number) => {\n      const bis = d3.bisector(d => (d as any).date).left;\n      const date = xScale.invert(mx);\n      const index = bis(this._graphData, date, 1);\n      const a = this._graphData[index - 1];\n      const b = this._graphData[index];\n      return b && (date.valueOf() - a.date.valueOf() > b.date.valueOf() - date.valueOf()) ? b : a;\n    }\n\n    /** Рисование перекрестия\n     * @param g Группа, в которую будут добавляться элементы графики\n     * @param data Данные в выбранной точке (где будет перекрестие)\n     */\n    const hover = (g: d3.Selection<SVGElement, unknown, HTMLElement, any>, data: { date: Date, value: number }) => {\n      // Если нет данных, то скрываем группу\n      if (!data) return g.style(\"display\", \"none\");\n\n      const baloonMargin = 5;\n\n      // Показываем группу\n      g\n        .style(\"display\", null)\n\n      // Горизонтальная линия\n      const hoverVLine = g\n        .selectAll(\"#vLine\")\n        .data([null])\n        .join(\"line\")\n        .attr(\"id\", \"vLine\")\n        .attr(\"y2\", this.graphHeight)\n        .attr(\"stroke-width\", \"0.2\")\n        .attr(\"stroke\", \"black\");\n      // Вертикальная линия\n      const hoverHLine = g\n        .selectAll(\"#hLine\")\n        .data([data])\n        .join(\"line\")\n        .attr(\"id\", \"hLine\")\n        .attr(\"x2\", this.graphWidth)\n        .attr(\"stroke-width\", \"0.2\")\n        .attr(\"stroke\", 'black');\n      // Кружок в точке пересечения\n      const hoverCircle = g\n        .selectAll(\"#circle\")\n        .data([data])\n        .join(\"circle\")\n        .attr(\"id\", \"circle\")\n        .attr(\"r\", 3)\n        .attr(\"stroke-width\", 2)\n        .attr(\"stroke\", 'black');\n\n      const baloon = g.selectAll(\"rect\")\n        .data([data])\n        .join(\"rect\")\n        .attr(\"fill\", \"white\")\n        .attr(\"stroke-width\", 1)\n        .attr(\"stroke\", color);\n\n      const value = g\n        .selectAll(\"#value\")\n        .data([null])\n        .join(\"text\")\n        .attr(\"id\", \"value\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"alignment-baseline\", \"hanging\")\n        .call(text => text\n          .selectAll(\"tspan\")\n          .data((data.value + \"\").split(/\\n/))\n          .join(\"tspan\")\n          .attr(\"x\", 0)\n          .attr(\"y\", margin.top)\n          .style(\"font-weight\", (_, i) => i ? null : \"bold\")\n          .text(d => `${d} ${this.yUnits}`.trimEnd()));\n\n\n      // Трансформируем все объекты в нужное место\n      hoverVLine.attr('transform', 'translate(' + xScale(data.date) + ',0)');\n      hoverHLine.attr('transform', 'translate(0,' + y(data.value) + ')');\n      hoverCircle.attr(\"transform\", `translate(${xScale(data.date)},${y(data.value)})`)\n      value.attr(\"transform\", `translate(${xScale(data.date)},${baloonMargin})`)\n\n      const rect = (value.node() as SVGGraphicsElement).getBBox({ stroke: false });\n\n\n\n      //baloon.attr(\"d\", `M${-rect.width / 2 - baloonMargin},-${baloonMargin}h${rect.width + baloonMargin*2}v${rect.height + baloonMargin*2}h-${rect.width + baloonMargin*2}z`);\n      baloon\n        .attr(\"x\", -rect.width / 2 - baloonMargin)\n        .attr(\"y\", rect.y - baloonMargin)\n        .attr(\"width\", rect.width + baloonMargin * 2)\n        .attr(\"height\", rect.height + baloonMargin * 2);\n      baloon.attr(\"transform\", `translate(${xScale(data.date)},${baloonMargin})`)\n    }\n    const tooltip = svg.append(\"g\");\n\n    const hoverGroup = svg.append(\"g\");\n\n    // Set the zoom and Pan features: how much you can zoom, on which part, and what to do when there is a zoom\n    const zoom = d3\n      .zoom()\n      .scaleExtent([1, 100])\n      .extent([[0, 0], [this.graphWidth, this.graphHeight]])\n      .on('zoom', (event: any) => {\n        tooltip.call(callout, null)\n        hoverGroup.call(hover, null)\n        // Получаем новый масштаб по оси X\n        xScale = event.transform.rescaleX(origXScale);\n        // Обновляем ось X\n        svgXAxis.call(xAxis(xScale)).call(xLabels);\n        // Обновляем данные в соответсвии с новым масштабом по оси X\n        points.attr(\n          'd',\n          d3\n            .line<{ date: Date; value: number }>()\n            .x(d => xScale(d.date))\n            .y(d => y(d.value))\n        );\n      });\n\n    // This add an invisible rect on top of the chart area. This rect can recover pointer events: necessary to understand when the user zoom\n    const graphArea = svg\n      .append('rect')\n      .attr('width', this.graphWidth)\n      .attr('height', this.graphHeight)\n      .style('fill', 'none')\n      .style('pointer-events', 'all')\n      //.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n      .call(zoom);\n\n    graphArea.on(\"touchmove mousemove\", function (event) {\n      const coords = d3.pointer(event, this);\n      const v = bisect(coords[0]);\n      hoverGroup.call(hover, v);\n      /*tooltip\n        .attr(\"transform\", `translate(${xScale(v.date)},${y(v.value)})`)\n        .call(callout, `${v.value}\\n${locale.format('%H:%M, %d %B %Y')(v.date)}`);*/\n    });\n\n    graphArea.on(\"touchend mouseleave\", () => {\n      tooltip.call(callout, null);\n      hoverGroup.call(hover, null);\n    });\n\n  }\n\n\n\n  /** Рисование лимитов на графике\n   * @param svg Главный элемент\n   */\n  private drawLimits(\n    svg: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n    yScale: d3.ScaleLinear<number, number, never>) {\n    if (!this.showLimits || (!this._limits || this._limits.length === 0)) return;\n    /** Группа с горизонтальными линиями на основе лимитов */\n\n    const lineGroups = svg\n      .selectAll('#limits') // выбираем объекты с идентификатором limits\n      .data([null]) // Это нужно чтобы создать элемент, если его нет\n      .join('g') // создаем элемент\n      .attr('id', 'limits')\n      .selectAll()\n      .data(this._limits)\n      .enter()\n      .append('g')\n      .attr(\"name\", (d) => d.name);;\n\n\n    lineGroups\n      .append('line')\n      .attr('transform', (d) => 'translate(0,' + yScale(d.value) + ')')\n      .style('stroke', (d) => d.color)\n      .style('stroke-width', 2)\n      .attr('x1', 0)\n      .attr('y1', 0)\n      .attr('x2', this.graphWidth)\n      .attr('y2', 0);\n    lineGroups\n      .append('text')\n      .attr('transform', (d) => 'translate(0,' + yScale(d.value) + ')')\n      .attr('y', -4)\n      .attr('x', 10)\n      .attr('text-anchor', 'bottom')\n      .text((d) => d.name);\n  }\n}\n","export default \"<div id=\\\"monitoringGraph\\\"></div>\\n\";","export default \"@charset \\\"UTF-8\\\";\\r\\n.str15 {stroke:red;stroke-width:26.21;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str16 {stroke:#2B2A29;stroke-width:19.81;stroke-miterlimit:22.9256;stroke-dasharray:99.044807 99.044807}\\r\\n.str2 {stroke:black;stroke-width:25.61;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str10 {stroke:black;stroke-width:0.61;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str11 {stroke:black;stroke-width:5.7;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str5 {stroke:black;stroke-width:8.54;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str4 {stroke:black;stroke-width:34.15;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str0 {stroke:black;stroke-width:14.23;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str1 {stroke:black;stroke-width:39.85;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str13 {stroke:blue;stroke-width:17.08;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str7 {stroke:#00B800;stroke-width:17.08;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str9 {stroke:aqua;stroke-width:17.08;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str12 {stroke:#A953A0;stroke-width:17.08;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str8 {stroke:red;stroke-width:17.08;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str6 {stroke:fuchsia;stroke-width:17.08;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str14 {stroke:yellow;stroke-width:17.08;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.str3 {stroke:black;stroke-width:17.08;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\\r\\n.fil8 {fill:none}\\r\\n.fil0 {fill:none;fill-rule:nonzero}\\r\\n.fil2 {fill:black;fill-rule:nonzero}\\r\\n.fil6 {fill:blue;fill-rule:nonzero}\\r\\n.fil4 {fill:#00B800;fill-rule:nonzero}\\r\\n.fil5 {fill:#A953A0;fill-rule:nonzero}\\r\\n.fil7 {fill:red;fill-rule:nonzero}\\r\\n.fil3 {fill:fuchsia;fill-rule:nonzero}\\r\\n.fil1 {fill:black;fill-rule:nonzero}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNoZW1hLmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFDaEIsUUFBUSxVQUFVLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CLENBQUMscUJBQXFCLENBQUMsb0JBQW9CO0FBQ3JHLFFBQVEsY0FBYyxDQUFDLGtCQUFrQixDQUFDLHlCQUF5QixDQUFDLG9DQUFvQztBQUN4RyxPQUFPLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxvQkFBb0IsQ0FBQyxxQkFBcUIsQ0FBQyxvQkFBb0I7QUFDdEcsUUFBUSxZQUFZLENBQUMsaUJBQWlCLENBQUMsb0JBQW9CLENBQUMscUJBQXFCLENBQUMsb0JBQW9CO0FBQ3RHLFFBQVEsWUFBWSxDQUFDLGdCQUFnQixDQUFDLG9CQUFvQixDQUFDLHFCQUFxQixDQUFDLG9CQUFvQjtBQUNyRyxPQUFPLFlBQVksQ0FBQyxpQkFBaUIsQ0FBQyxvQkFBb0IsQ0FBQyxxQkFBcUIsQ0FBQyxvQkFBb0I7QUFDckcsT0FBTyxZQUFZLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CLENBQUMscUJBQXFCLENBQUMsb0JBQW9CO0FBQ3RHLE9BQU8sWUFBWSxDQUFDLGtCQUFrQixDQUFDLG9CQUFvQixDQUFDLHFCQUFxQixDQUFDLG9CQUFvQjtBQUN0RyxPQUFPLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxvQkFBb0IsQ0FBQyxxQkFBcUIsQ0FBQyxvQkFBb0I7QUFDdEcsUUFBUSxXQUFXLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CLENBQUMscUJBQXFCLENBQUMsb0JBQW9CO0FBQ3RHLE9BQU8sY0FBYyxDQUFDLGtCQUFrQixDQUFDLG9CQUFvQixDQUFDLHFCQUFxQixDQUFDLG9CQUFvQjtBQUN4RyxPQUFPLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxvQkFBb0IsQ0FBQyxxQkFBcUIsQ0FBQyxvQkFBb0I7QUFDckcsUUFBUSxjQUFjLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CLENBQUMscUJBQXFCLENBQUMsb0JBQW9CO0FBQ3pHLE9BQU8sVUFBVSxDQUFDLGtCQUFrQixDQUFDLG9CQUFvQixDQUFDLHFCQUFxQixDQUFDLG9CQUFvQjtBQUNwRyxPQUFPLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxvQkFBb0IsQ0FBQyxxQkFBcUIsQ0FBQyxvQkFBb0I7QUFDeEcsUUFBUSxhQUFhLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CLENBQUMscUJBQXFCLENBQUMsb0JBQW9CO0FBQ3hHLE9BQU8sWUFBWSxDQUFDLGtCQUFrQixDQUFDLG9CQUFvQixDQUFDLHFCQUFxQixDQUFDLG9CQUFvQjtBQUN0RyxPQUFPLFNBQVM7QUFDaEIsT0FBTyxTQUFTLENBQUMsaUJBQWlCO0FBQ2xDLE9BQU8sVUFBVSxDQUFDLGlCQUFpQjtBQUNuQyxPQUFPLFNBQVMsQ0FBQyxpQkFBaUI7QUFDbEMsT0FBTyxZQUFZLENBQUMsaUJBQWlCO0FBQ3JDLE9BQU8sWUFBWSxDQUFDLGlCQUFpQjtBQUNyQyxPQUFPLFFBQVEsQ0FBQyxpQkFBaUI7QUFDakMsT0FBTyxZQUFZLENBQUMsaUJBQWlCO0FBQ3JDLE9BQU8sVUFBVSxDQUFDLGlCQUFpQiIsImZpbGUiOiJzaGVtYS5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAY2hhcnNldCBcIlVURi04XCI7XHJcbi5zdHIxNSB7c3Ryb2tlOnJlZDtzdHJva2Utd2lkdGg6MjYuMjE7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwfVxyXG4uc3RyMTYge3N0cm9rZTojMkIyQTI5O3N0cm9rZS13aWR0aDoxOS44MTtzdHJva2UtbWl0ZXJsaW1pdDoyMi45MjU2O3N0cm9rZS1kYXNoYXJyYXk6OTkuMDQ0ODA3IDk5LjA0NDgwN31cclxuLnN0cjIge3N0cm9rZTpibGFjaztzdHJva2Utd2lkdGg6MjUuNjE7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwfVxyXG4uc3RyMTAge3N0cm9rZTpibGFjaztzdHJva2Utd2lkdGg6MC42MTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTB9XHJcbi5zdHIxMSB7c3Ryb2tlOmJsYWNrO3N0cm9rZS13aWR0aDo1Ljc7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwfVxyXG4uc3RyNSB7c3Ryb2tlOmJsYWNrO3N0cm9rZS13aWR0aDo4LjU0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMH1cclxuLnN0cjQge3N0cm9rZTpibGFjaztzdHJva2Utd2lkdGg6MzQuMTU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwfVxyXG4uc3RyMCB7c3Ryb2tlOmJsYWNrO3N0cm9rZS13aWR0aDoxNC4yMztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTB9XHJcbi5zdHIxIHtzdHJva2U6YmxhY2s7c3Ryb2tlLXdpZHRoOjM5Ljg1O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMH1cclxuLnN0cjEzIHtzdHJva2U6Ymx1ZTtzdHJva2Utd2lkdGg6MTcuMDg7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwfVxyXG4uc3RyNyB7c3Ryb2tlOiMwMEI4MDA7c3Ryb2tlLXdpZHRoOjE3LjA4O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMH1cclxuLnN0cjkge3N0cm9rZTphcXVhO3N0cm9rZS13aWR0aDoxNy4wODtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTB9XHJcbi5zdHIxMiB7c3Ryb2tlOiNBOTUzQTA7c3Ryb2tlLXdpZHRoOjE3LjA4O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMH1cclxuLnN0cjgge3N0cm9rZTpyZWQ7c3Ryb2tlLXdpZHRoOjE3LjA4O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMH1cclxuLnN0cjYge3N0cm9rZTpmdWNoc2lhO3N0cm9rZS13aWR0aDoxNy4wODtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTB9XHJcbi5zdHIxNCB7c3Ryb2tlOnllbGxvdztzdHJva2Utd2lkdGg6MTcuMDg7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwfVxyXG4uc3RyMyB7c3Ryb2tlOmJsYWNrO3N0cm9rZS13aWR0aDoxNy4wODtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTB9XHJcbi5maWw4IHtmaWxsOm5vbmV9XHJcbi5maWwwIHtmaWxsOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm99XHJcbi5maWwyIHtmaWxsOmJsYWNrO2ZpbGwtcnVsZTpub256ZXJvfVxyXG4uZmlsNiB7ZmlsbDpibHVlO2ZpbGwtcnVsZTpub256ZXJvfVxyXG4uZmlsNCB7ZmlsbDojMDBCODAwO2ZpbGwtcnVsZTpub256ZXJvfVxyXG4uZmlsNSB7ZmlsbDojQTk1M0EwO2ZpbGwtcnVsZTpub256ZXJvfVxyXG4uZmlsNyB7ZmlsbDpyZWQ7ZmlsbC1ydWxlOm5vbnplcm99XHJcbi5maWwzIHtmaWxsOmZ1Y2hzaWE7ZmlsbC1ydWxlOm5vbnplcm99XHJcbi5maWwxIHtmaWxsOmJsYWNrO2ZpbGwtcnVsZTpub256ZXJvfVxyXG4iXX0= */\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LmNzcyJ9 */\";","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Component, ElementRef, OnInit } from '@angular/core';\nimport * as d3 from 'd3';\nimport { color, xml } from 'd3';\nimport { Observable } from 'rxjs';\nimport { GraphData, GraphLimit } from './monitoring-graph/monitoring-graph.component';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css', './../assets/shema.css']\n})\nexport class AppComponent implements OnInit {\n  public limits = [{\n    name: \"Херово\",\n    value: 200,\n    color: \"#ffdd00\"\n  },\n  {\n    name: \"Очень херово\",\n    value: 300,\n    color: \"#ff7b00\"\n  }\n    ,\n  {\n    name: \"Писец\",\n    value: 400,\n    color: \"red\"\n  }\n  ];\n\n  public graphData: GraphData[];\n\n  data = [\n    {\n      id: 'shkaf_line',\n      state: 'yellow'\n    },\n    {\n      id: 'АСО-1-3-В_x0028_USB_x0029_',\n      state: 'blue'\n    }\n  ];\n\n  constructor(private el: ElementRef<HTMLElement>) { }\n\n  public colorizeGraph: boolean = true;\n  public colorizeGraphChange(event){\n    this.colorizeGraph = event.target.checked;\n  }\n\n  public showLimits: boolean = true;\n  public showLimitsChange(event){\n    this.showLimits = event.target.checked;\n  }\n\n\n  ngOnInit(): void {\n    // Загружаем данные\n    d3.csv('./assets/sensor.csv', (row, index, columns) => {\n      return {\n        date: d3.timeParse('%d-%m-%Y %H:%M')(row.date),\n        value: Number.parseFloat(row.value)\n      } as GraphData;\n    })\n      .then(data => {\n        this.graphData = data;\n      });\n    const _this = this;\n    /*d3.xml('./assets/shema.svg')\n    .then((t) => {\n      document.body.appendChild(t.documentElement);\n      const svg = d3.select('svg');\n      let elements = svg.selectAll('*')\n        .data(_this.data, function(d: any) {\n           return (d && d.id) || (this as any).id;\n        });\n\n        elements.style('stroke', (d) => {\n          return d.state;\n        });\n      \n      setTimeout(() => {\n        _this.data[0].state = 'green';\n        _this.data[1].state = 'red';\n        elements\n          .style('stroke', (d) => {\n            return d.state;\n          });\n\n          this.blink(elements);\n\n      }, 5000);\n\n    });*/\n\n  }\n\n  blink(selection: d3.Selection<d3.BaseType, any, d3.BaseType, any>): void {\n    selection\n      .transition()\n      .duration(100)\n      .style('stroke', 'red')\n      .style('stroke-width', '100')\n      .delay(900)\n      .transition()\n      .duration(100)\n      .style('stroke', 'black')\n      .style('stroke-width', '10')\n      .delay(900)\n      .on('end', () => {\n        this.blink(selection);\n      });\n    //    ^------^---- calling blink again when the transition ends\n  }\n\n}\n","export default \"<input if=\\\"cbColor\\\" type=\\\"checkbox\\\" [checked]=\\\"this.colorizeGraph\\\" (change)=\\\"this.colorizeGraphChange($event)\\\">\\n<label for=\\\"cbColor\\\">Раскрасить график</label>\\n<input if=\\\"cbLimits\\\" type=\\\"checkbox\\\" [checked]=\\\"this.showLimits\\\" (change)=\\\"this.showLimitsChange($event)\\\">\\n<label for=\\\"cbLimits\\\">Линии лимитов</label>\\n<app-monitoring-graph \\n    [showLimits]=\\\"this.showLimits\\\"\\n    [limits]=\\\"this.limits\\\"\\n    [colorizeByLimits]=\\\"this.colorizeGraph\\\"\\n    [graphData]=\\\"this.graphData\\\"\\n    yUnits=\\\"мг/м3\\\"\\n></app-monitoring-graph>\\n<router-outlet></router-outlet>\\n\";","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { MonitoringGraphComponent } from './monitoring-graph/monitoring-graph.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    MonitoringGraphComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJtb25pdG9yaW5nLWdyYXBoLmNvbXBvbmVudC5jc3MifQ== */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"]}